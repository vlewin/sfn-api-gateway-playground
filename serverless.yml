service: sfn-api-gateway-playground

provider:
  name: aws
  runtime: nodejs8.10
  region: eu-central-1

  apiGateway: # Optional API Gateway global config
    restApiId: n42gvt3whk # REST API resource ID. Default is generated by the framework
    restApiRootResourceId: 9f8qmgn5d6 # Root resource ID, represent as / path
    restApiResources: # List of existing resources that were created in the REST API. This is required or the stack will be conflicted
      '/playground': skvi34

  iamRoleStatements:
    - Effect: "Allow"
      Action:
        - "s3:*"
      Resource:
        - "*"

functions:
  start:
    handler: handler.start

stepFunctions:
  stateMachines:
    SfnApiGateway:
      events:
        - http:
            path: /playground/start
            method: post
            # arn: arn:aws:lambda:eu-central-1:435287293695:function:work-life-balance-api-development-authorizer
            # resultTtlInSeconds: 0
            # identitySource: method.request.header.Authorization
            # authorizer: arn:aws:lambda:eu-central-1:435287293695:function:work-life-balance-api-development-authorizer
            authorizer: ytn82i
      definition:
        Comment: "A sample application"
        StartAt: Start
        States:
          Start:
            Type: Pass
            End: true
plugins:
  - serverless-step-functions
  - serverless-pseudo-parameters
